/*! For license information please see main.a91d9f6b.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:c,props:i,_owner:l.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,h(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var a,i={},o=null,l=null;if(null!=t)for(a in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!j.hasOwnProperty(a)&&(i[a]=t[a]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===i[a]&&(i[a]=s[a]);return{$$typeof:n,type:e,key:o,ref:l,props:i,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,i,o){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===i?"."+_(s,0):i,w(o)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),T(o,t,a,"",function(e){return e})):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(s=0,i=""===i?".":i+":",w(e))for(var u=0;u<e.length;u++){var c=i+_(l=e[u],u);s+=T(l,t,a,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(l=e.next()).done;)s+=T(l=l.value,t,a,c=i+_(l,u++),o);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function P(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",function(e){return t.call(n,e,a++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};function z(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=z,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),i=e.key,o=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,l=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)k.call(t,u)&&!j.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];a.children=s}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:l}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=z,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var l=2*(r+1)-1,s=e[l],u=l+1,c=e[u];if(0>i(s,n))u<a&&0>i(c,s)?(e[r]=c,e[u]=n,r=u):(e[r]=s,e[l]=n,r=l);else{if(!(u<a&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var u=[],c=[],d=1,f=null,m=3,p=!1,h=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,x(e),!h)if(null!==r(u))h=!0,R(k);else{var t=r(c);null!==t&&L(w,t.startTime-e)}}function k(e,n){h=!1,g&&(g=!1,y(E),E=-1),p=!0;var i=m;try{for(x(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!T());){var o=f.callback;if("function"===typeof o){f.callback=null,m=f.priorityLevel;var l=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?f.callback=l:f===r(u)&&a(u),x(n)}else a(u);f=r(u)}if(null!==f)var s=!0;else{var d=r(c);null!==d&&L(w,d.startTime-n),s=!1}return s}finally{f=null,m=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,j=!1,N=null,E=-1,C=5,_=-1;function T(){return!(t.unstable_now()-_<C)}function P(){if(null!==N){var e=t.unstable_now();_=e;var n=!0;try{n=N(!0,e)}finally{n?S():(j=!1,N=null)}}else j=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,O=M.port2;M.port1.onmessage=P,S=function(){O.postMessage(null)}}else S=function(){v(P,0)};function R(e){N=e,j||(j=!0,S())}function L(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||p||(h=!0,R(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:l=i+l,sortIndex:-1},i>o?(e.sortIndex=i,n(c,e),null===r(u)&&e===r(c)&&(g?(y(E),E=-1):g=!0,L(w,i-o))):(e.sortIndex=l,n(u,e),h||p||(h=!0,R(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),a=n(853);function i(e){for(var t="https://50e93936-6a41-4e42-98c9-7dde2d98d8eb.preview.emergentagent.com"});l.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),r(null)),Promise.reject(e)}),(0,i.useEffect)(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{const e=JSON.parse(t);r(e)}catch(n){console.error("Error parsing user data:",n),localStorage.removeItem("token"),localStorage.removeItem("user")}o(!1)},[]);const s={user:n,login:async(e,t)=>{try{const n=await l.post("/api/auth",{email:e,password:t}),{access_token:a,user:i}=n.data;return localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(i)),r(i),{success:!0}}catch(i){var n,a;return console.error("Login error:",i),{success:!1,error:(null===(n=i.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||"Erreur de connexion"}}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),r(null)},loading:a,isAuthenticated:!!n,isAgent:"agent"===(null===n||void 0===n?void 0:n.type_utilisateur),isDemandeur:"demandeur"===(null===n||void 0===n?void 0:n.type_utilisateur),api:l};return(0,Xt.jsx)(Kt.Provider,{value:s,children:t})};var en={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var tn=(e,t)=>{const n=(0,i.forwardRef)((n,r)=>{let{color:a="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:s,children:u,...c}=n;return(0,i.createElement)("svg",{ref:r,...en,width:o,height:o,stroke:a,strokeWidth:s?24*Number(l)/Number(o):l,className:`lucide lucide-${d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...c},[...t.map(e=>{let[t,n]=e;return(0,i.createElement)(t,n)}),...(Array.isArray(u)?u:[u])||[]]);var d});return n.displayName=`${e}`,n};const nn=tn("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),rn=tn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),an=tn("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),on=tn("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),ln=tn("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),sn=tn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),un=tn("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),cn=tn("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),dn=tn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),fn=tn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),mn=e=>{var t,n;let{children:r,currentPage:a,onNavigate:o}=e;const{user:l,logout:s,isAgent:u}=Gt(),[c,d]=(0,i.useState)(!1),[f,m]=(0,i.useState)(!0),p=[...u?[{name:"Supervision Tickets",icon:nn,key:"tickets"},{name:"Clients",icon:rn,key:"clients"},{name:"Demandeurs",icon:an,key:"demandeurs"},{name:"Agents",icon:on,key:"agents"}]:[{name:"Mes Tickets",icon:nn,key:"tickets"},{name:"Nouveau Ticket",icon:ln,key:"nouveau-ticket"}]];return(0,Xt.jsxs)("div",{className:"flex min-h-screen bg-gray-50 dark:bg-dark-bg",children:[c&&(0,Xt.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>d(!1)}),(0,Xt.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-surface shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:relative lg:z-0 lg:shadow-none "+(c?"translate-x-0":"-translate-x-full"),children:[(0,Xt.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-dark-border",children:[(0,Xt.jsx)("h1",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"Support Tickets"}),(0,Xt.jsx)("button",{onClick:()=>d(!1),className:"lg:hidden p-2 rounded-md text-gray-500 hover:text-gray-700 dark:text-dark-muted dark:hover:text-dark-text",children:(0,Xt.jsx)(sn,{className:"h-5 w-5"})})]}),(0,Xt.jsx)("nav",{className:"flex-1 mt-6 px-3",children:(0,Xt.jsx)("div",{className:"space-y-1",children:p.map(e=>(0,Xt.jsxs)("button",{onClick:()=>{o(e.key),d(!1)},className:"flex items-center w-full px-4 py-2 text-left text-gray-700 dark:text-dark-text hover:bg-primary-50 dark:hover:bg-dark-card rounded-lg transition-colors duration-200 "+(a===e.key?"bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-300":""),children:[(0,Xt.jsx)(e.icon,{className:"h-5 w-5 mr-3"}),e.name]},e.key))})}),(0,Xt.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-dark-border",children:[(0,Xt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xt.jsx)("span",{className:"text-sm text-gray-600 dark:text-dark-muted",children:"Th\xe8me"}),(0,Xt.jsx)("button",{onClick:()=>{m(!f),document.documentElement.classList.toggle("dark")},className:"p-2 rounded-lg bg-gray-100 dark:bg-dark-card hover:bg-gray-200 dark:hover:bg-secondary-700 transition-colors",children:f?(0,Xt.jsx)(un,{className:"h-4 w-4 text-yellow-500"}):(0,Xt.jsx)(cn,{className:"h-4 w-4 text-blue-500"})})]}),(0,Xt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xt.jsxs)("div",{className:"flex items-center",children:[(0,Xt.jsxs)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:[null===l||void 0===l||null===(t=l.prenom)||void 0===t?void 0:t[0],null===l||void 0===l||null===(n=l.nom)||void 0===n?void 0:n[0]]}),(0,Xt.jsxs)("div",{className:"ml-3",children:[(0,Xt.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-dark-text",children:[null===l||void 0===l?void 0:l.prenom," ",null===l||void 0===l?void 0:l.nom]}),(0,Xt.jsx)("p",{className:"text-xs text-gray-500 dark:text-dark-muted",children:"agent"===(null===l||void 0===l?void 0:l.type_utilisateur)?"Agent":"Demandeur"})]})]}),(0,Xt.jsx)("button",{onClick:s,className:"p-2 text-gray-500 hover:text-red-600 dark:text-dark-muted dark:hover:text-red-400 transition-colors",children:(0,Xt.jsx)(dn,{className:"h-5 w-5"})})]})]})]}),(0,Xt.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,Xt.jsxs)("div",{className:"h-16 bg-white dark:bg-dark-surface shadow-sm border-b border-gray-200 dark:border-dark-border flex items-center justify-between px-6",children:[(0,Xt.jsx)("button",{onClick:()=>d(!0),className:"lg:hidden p-2 rounded-md text-gray-500 hover:text-gray-700 dark:text-dark-muted dark:hover:text-dark-text",children:(0,Xt.jsx)(fn,{className:"h-5 w-5"})}),(0,Xt.jsx)("div",{className:"flex items-center space-x-4",children:(0,Xt.jsx)("span",{className:"text-sm text-gray-600 dark:text-dark-muted",children:null===l||void 0===l?void 0:l.societe})})]}),(0,Xt.jsx)("main",{className:"flex-1 p-6 overflow-auto",children:r})]})]})},pn=tn("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),hn=tn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),gn=tn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),vn=tn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),yn=()=>{const{login:e}=Gt(),[t,n]=(0,i.useState)(""),[r,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(!1),[s,u]=(0,i.useState)("");return(0,Xt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 dark:from-dark-bg dark:to-dark-surface flex items-center justify-center p-4",children:(0,Xt.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Xt.jsxs)("div",{className:"text-center",children:[(0,Xt.jsx)("div",{className:"mx-auto h-16 w-16 bg-primary-600 rounded-full flex items-center justify-center",children:(0,Xt.jsx)(pn,{className:"h-8 w-8 text-white"})}),(0,Xt.jsx)("h2",{className:"mt-6 text-3xl font-bold text-gray-900 dark:text-dark-text",children:"Connexion"}),(0,Xt.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-dark-muted",children:"Syst\xe8me de gestion de tickets de support"})]}),(0,Xt.jsxs)("div",{className:"card p-8",children:[(0,Xt.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),l(!0),u("");const a=await e(t,r);a.success||u(a.error),l(!1)},className:"space-y-6",children:[s&&(0,Xt.jsxs)("div",{className:"flex items-center p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,Xt.jsx)(hn,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-3"}),(0,Xt.jsx)("span",{className:"text-red-700 dark:text-red-300 text-sm",children:s})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-2",children:"Email"}),(0,Xt.jsxs)("div",{className:"relative",children:[(0,Xt.jsx)(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 dark:text-dark-muted"}),(0,Xt.jsx)("input",{id:"email",type:"email",required:!0,value:t,onChange:e=>n(e.target.value),className:"input pl-10",placeholder:"votre@email.fr"})]})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-2",children:"Mot de passe"}),(0,Xt.jsxs)("div",{className:"relative",children:[(0,Xt.jsx)(vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 dark:text-dark-muted"}),(0,Xt.jsx)("input",{id:"password",type:"password",required:!0,value:r,onChange:e=>a(e.target.value),className:"input pl-10",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]})]}),(0,Xt.jsx)("button",{type:"submit",disabled:o,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:o?(0,Xt.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)(pn,{className:"h-5 w-5 mr-2"}),"Se connecter"]})})]}),(0,Xt.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-dark-card rounded-lg",children:[(0,Xt.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-dark-text mb-2",children:"Compte de test :"}),(0,Xt.jsxs)("p",{className:"text-xs text-gray-600 dark:text-dark-muted",children:["Email: admin@voipservices.fr",(0,Xt.jsx)("br",{}),"Mot de passe: admin1234!"]})]})]})]})})},bn=tn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),xn=tn("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),wn=tn("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),kn=tn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Sn=tn("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),jn=()=>{const{api:e}=Gt(),[t,n]=(0,i.useState)([]),[r,a]=(0,i.useState)(!0),[o,l]=(0,i.useState)(""),[s,u]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null),[f,m]=(0,i.useState)({nom_societe:"",adresse:"",nom:"",prenom:""});(0,i.useEffect)(()=>{p()},[]);const p=async()=>{try{const t=await e.get("/api/clients");n(t.data)}catch(o){l("Erreur lors du chargement des clients")}finally{a(!1)}},h=()=>{u(!1),d(null),m({nom_societe:"",adresse:"",nom:"",prenom:""}),l("")};return r?(0,Xt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Xt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Xt.jsxs)("div",{className:"fade-in",children:[(0,Xt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Xt.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-dark-text",children:"Gestion des Clients"}),(0,Xt.jsxs)("button",{onClick:()=>u(!0),className:"btn-primary flex items-center",children:[(0,Xt.jsx)(bn,{className:"h-5 w-5 mr-2"}),"Nouveau Client"]})]}),o&&(0,Xt.jsxs)("div",{className:"mb-4 flex items-center p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,Xt.jsx)(hn,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-3"}),(0,Xt.jsx)("span",{className:"text-red-700 dark:text-red-300",children:o})]}),(0,Xt.jsxs)("div",{className:"card overflow-hidden",children:[(0,Xt.jsxs)("table",{className:"table",children:[(0,Xt.jsx)("thead",{children:(0,Xt.jsxs)("tr",{children:[(0,Xt.jsx)("th",{children:"Soci\xe9t\xe9"}),(0,Xt.jsx)("th",{children:"Contact"}),(0,Xt.jsx)("th",{children:"Adresse"}),(0,Xt.jsx)("th",{children:"Actions"})]})}),(0,Xt.jsx)("tbody",{children:t.map(t=>(0,Xt.jsxs)("tr",{children:[(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"flex items-center",children:[(0,Xt.jsx)(xn,{className:"h-5 w-5 text-primary-600 mr-2"}),(0,Xt.jsx)("span",{className:"font-medium",children:t.nom_societe})]})}),(0,Xt.jsxs)("td",{children:[t.prenom," ",t.nom]}),(0,Xt.jsx)("td",{className:"max-w-xs truncate",children:t.adresse}),(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"flex space-x-2",children:[(0,Xt.jsx)("button",{onClick:()=>(e=>{d(e),m({nom_societe:e.nom_societe,adresse:e.adresse,nom:e.nom,prenom:e.prenom}),u(!0)})(t),className:"p-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300",children:(0,Xt.jsx)(wn,{className:"h-4 w-4"})}),(0,Xt.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce client ?"))try{await e.delete(`/api/clients/${t}`),p()}catch(o){var n,r;l((null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erreur lors de la suppression")}})(t.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:(0,Xt.jsx)(kn,{className:"h-4 w-4"})})]})})]},t.id))})]}),0===t.length&&(0,Xt.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-dark-muted",children:"Aucun client enregistr\xe9"})]}),s&&(0,Xt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-overlay",children:(0,Xt.jsxs)("div",{className:"bg-white dark:bg-dark-surface rounded-lg p-6 w-full max-w-md modal-content",children:[(0,Xt.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-dark-text",children:c?"Modifier le Client":"Nouveau Client"}),(0,Xt.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{c?await e.put(`/api/clients/${c.id}`,f):await e.post("/api/clients",f),p(),h()}catch(o){var n,r;l((null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erreur lors de la sauvegarde")}},className:"space-y-4",children:[(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Nom de la soci\xe9t\xe9 *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:f.nom_societe,onChange:e=>m({...f,nom_societe:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Adresse *"}),(0,Xt.jsx)("textarea",{required:!0,value:f.adresse,onChange:e=>m({...f,adresse:e.target.value}),className:"input h-20 resize-none"})]}),(0,Xt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Nom *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:f.nom,onChange:e=>m({...f,nom:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Pr\xe9nom *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:f.prenom,onChange:e=>m({...f,prenom:e.target.value}),className:"input"})]})]}),(0,Xt.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Xt.jsx)("button",{type:"button",onClick:h,className:"btn-secondary",children:"Annuler"}),(0,Xt.jsxs)("button",{type:"submit",className:"btn-primary flex items-center",children:[(0,Xt.jsx)(Sn,{className:"h-4 w-4 mr-2"}),c?"Modifier":"Cr\xe9er"]})]})]})]})})]})},Nn=tn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),En=()=>{const{api:e}=Gt(),[t,n]=(0,i.useState)([]),[r,a]=(0,i.useState)(!0),[o,l]=(0,i.useState)(""),[s,u]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null),[f,m]=(0,i.useState)({nom:"",prenom:"",societe:"",telephone:"",email:"",password:""});(0,i.useEffect)(()=>{p()},[]);const p=async()=>{try{const t=await e.get("/api/demandeurs");n(t.data)}catch(o){l("Erreur lors du chargement des demandeurs")}finally{a(!1)}},h=()=>{u(!1),d(null),m({nom:"",prenom:"",societe:"",telephone:"",email:"",password:""}),l("")};return r?(0,Xt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Xt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Xt.jsxs)("div",{className:"fade-in",children:[(0,Xt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Xt.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-dark-text",children:"Gestion des Demandeurs"}),(0,Xt.jsxs)("button",{onClick:()=>u(!0),className:"btn-primary flex items-center",children:[(0,Xt.jsx)(bn,{className:"h-5 w-5 mr-2"}),"Nouveau Demandeur"]})]}),o&&(0,Xt.jsxs)("div",{className:"mb-4 flex items-center p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,Xt.jsx)(hn,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-3"}),(0,Xt.jsx)("span",{className:"text-red-700 dark:text-red-300",children:o})]}),(0,Xt.jsxs)("div",{className:"card overflow-hidden",children:[(0,Xt.jsxs)("table",{className:"table",children:[(0,Xt.jsx)("thead",{children:(0,Xt.jsxs)("tr",{children:[(0,Xt.jsx)("th",{children:"Nom"}),(0,Xt.jsx)("th",{children:"Email"}),(0,Xt.jsx)("th",{children:"Soci\xe9t\xe9"}),(0,Xt.jsx)("th",{children:"T\xe9l\xe9phone"}),(0,Xt.jsx)("th",{children:"Actions"})]})}),(0,Xt.jsx)("tbody",{children:t.map(t=>(0,Xt.jsxs)("tr",{children:[(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"flex items-center",children:[(0,Xt.jsx)(an,{className:"h-5 w-5 text-primary-600 mr-2"}),(0,Xt.jsxs)("span",{className:"font-medium",children:[t.prenom," ",t.nom]})]})}),(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"flex items-center",children:[(0,Xt.jsx)(gn,{className:"h-4 w-4 text-gray-400 mr-2"}),t.email]})}),(0,Xt.jsx)("td",{children:t.societe}),(0,Xt.jsx)("td",{children:t.telephone&&(0,Xt.jsxs)("div",{className:"flex items-center",children:[(0,Xt.jsx)(Nn,{className:"h-4 w-4 text-gray-400 mr-2"}),t.telephone]})}),(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"flex space-x-2",children:[(0,Xt.jsx)("button",{onClick:()=>(e=>{d(e),m({nom:e.nom,prenom:e.prenom,societe:e.societe,telephone:e.telephone||"",email:e.email,password:""}),u(!0)})(t),className:"p-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300",children:(0,Xt.jsx)(wn,{className:"h-4 w-4"})}),(0,Xt.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce demandeur ?"))try{await e.delete(`/api/demandeurs/${t}`),p()}catch(o){var n,r;l((null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erreur lors de la suppression")}})(t.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:(0,Xt.jsx)(kn,{className:"h-4 w-4"})})]})})]},t.id))})]}),0===t.length&&(0,Xt.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-dark-muted",children:"Aucun demandeur enregistr\xe9"})]}),s&&(0,Xt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-overlay",children:(0,Xt.jsxs)("div",{className:"bg-white dark:bg-dark-surface rounded-lg p-6 w-full max-w-md modal-content",children:[(0,Xt.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-dark-text",children:c?"Modifier le Demandeur":"Nouveau Demandeur"}),(0,Xt.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{c?await e.put(`/api/demandeurs/${c.id}`,f):await e.post("/api/demandeurs",f),p(),h()}catch(o){var n,r;l((null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erreur lors de la sauvegarde")}},className:"space-y-4",children:[(0,Xt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Nom *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:f.nom,onChange:e=>m({...f,nom:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Pr\xe9nom *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:f.prenom,onChange:e=>m({...f,prenom:e.target.value}),className:"input"})]})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Soci\xe9t\xe9 *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:f.societe,onChange:e=>m({...f,societe:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"T\xe9l\xe9phone"}),(0,Xt.jsx)("input",{type:"tel",value:f.telephone,onChange:e=>m({...f,telephone:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Email *"}),(0,Xt.jsx)("input",{type:"email",required:!0,value:f.email,onChange:e=>m({...f,email:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Mot de passe *"}),(0,Xt.jsx)("input",{type:"password",required:!0,value:f.password,onChange:e=>m({...f,password:e.target.value}),className:"input",placeholder:c?"Nouveau mot de passe":"Mot de passe"})]}),(0,Xt.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Xt.jsx)("button",{type:"button",onClick:h,className:"btn-secondary",children:"Annuler"}),(0,Xt.jsxs)("button",{type:"submit",className:"btn-primary flex items-center",children:[(0,Xt.jsx)(Sn,{className:"h-4 w-4 mr-2"}),c?"Modifier":"Cr\xe9er"]})]})]})]})})]})},Cn=()=>{const{api:e}=Gt(),[t,n]=(0,i.useState)([]),[r,a]=(0,i.useState)(!0),[o,l]=(0,i.useState)(""),[s,u]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null),[f,m]=(0,i.useState)({nom:"",prenom:"",societe:"",email:"",password:""});(0,i.useEffect)(()=>{p()},[]);const p=async()=>{try{const t=await e.get("/api/agents");n(t.data)}catch(o){l("Erreur lors du chargement des agents")}finally{a(!1)}},h=()=>{u(!1),d(null),m({nom:"",prenom:"",societe:"",email:"",password:""}),l("")};return r?(0,Xt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Xt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Xt.jsxs)("div",{className:"fade-in",children:[(0,Xt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Xt.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-dark-text",children:"Gestion des Agents"}),(0,Xt.jsxs)("button",{onClick:()=>u(!0),className:"btn-primary flex items-center",children:[(0,Xt.jsx)(bn,{className:"h-5 w-5 mr-2"}),"Nouvel Agent"]})]}),o&&(0,Xt.jsxs)("div",{className:"mb-4 flex items-center p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,Xt.jsx)(hn,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-3"}),(0,Xt.jsx)("span",{className:"text-red-700 dark:text-red-300",children:o})]}),(0,Xt.jsxs)("div",{className:"card overflow-hidden",children:[(0,Xt.jsxs)("table",{className:"table",children:[(0,Xt.jsx)("thead",{children:(0,Xt.jsxs)("tr",{children:[(0,Xt.jsx)("th",{children:"Nom"}),(0,Xt.jsx)("th",{children:"Email"}),(0,Xt.jsx)("th",{children:"Soci\xe9t\xe9"}),(0,Xt.jsx)("th",{children:"Actions"})]})}),(0,Xt.jsx)("tbody",{children:t.map(t=>(0,Xt.jsxs)("tr",{children:[(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"flex items-center",children:[(0,Xt.jsx)(on,{className:"h-5 w-5 text-primary-600 mr-2"}),(0,Xt.jsxs)("span",{className:"font-medium",children:[t.prenom," ",t.nom]})]})}),(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"flex items-center",children:[(0,Xt.jsx)(gn,{className:"h-4 w-4 text-gray-400 mr-2"}),t.email]})}),(0,Xt.jsx)("td",{children:t.societe}),(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"flex space-x-2",children:[(0,Xt.jsx)("button",{onClick:()=>(e=>{d(e),m({nom:e.nom,prenom:e.prenom,societe:e.societe,email:e.email,password:""}),u(!0)})(t),className:"p-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300",children:(0,Xt.jsx)(wn,{className:"h-4 w-4"})}),(0,Xt.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cet agent ?"))try{await e.delete(`/api/agents/${t}`),p()}catch(o){var n,r;l((null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erreur lors de la suppression")}})(t.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:(0,Xt.jsx)(kn,{className:"h-4 w-4"})})]})})]},t.id))})]}),0===t.length&&(0,Xt.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-dark-muted",children:"Aucun agent enregistr\xe9"})]}),s&&(0,Xt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-overlay",children:(0,Xt.jsxs)("div",{className:"bg-white dark:bg-dark-surface rounded-lg p-6 w-full max-w-md modal-content",children:[(0,Xt.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-dark-text",children:c?"Modifier l'Agent":"Nouvel Agent"}),(0,Xt.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{c?await e.put(`/api/agents/${c.id}`,f):await e.post("/api/agents",f),p(),h()}catch(o){var n,r;l((null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erreur lors de la sauvegarde")}},className:"space-y-4",children:[(0,Xt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Nom *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:f.nom,onChange:e=>m({...f,nom:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Pr\xe9nom *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:f.prenom,onChange:e=>m({...f,prenom:e.target.value}),className:"input"})]})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Soci\xe9t\xe9 *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:f.societe,onChange:e=>m({...f,societe:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Email *"}),(0,Xt.jsx)("input",{type:"email",required:!0,value:f.email,onChange:e=>m({...f,email:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Mot de passe *"}),(0,Xt.jsx)("input",{type:"password",required:!0,value:f.password,onChange:e=>m({...f,password:e.target.value}),className:"input",placeholder:c?"Nouveau mot de passe":"Mot de passe"})]}),(0,Xt.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Xt.jsx)("button",{type:"button",onClick:h,className:"btn-secondary",children:"Annuler"}),(0,Xt.jsxs)("button",{type:"submit",className:"btn-primary flex items-center",children:[(0,Xt.jsx)(Sn,{className:"h-4 w-4 mr-2"}),c?"Modifier":"Cr\xe9er"]})]})]})]})})]})},_n=tn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Tn=tn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Pn=tn("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Mn=tn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),On=tn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function Ln(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function zn(e){Ln(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Rn(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Dn(e){if(Ln(1,arguments),!function(e){return Ln(1,arguments),e instanceof Date||"object"===Rn(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var t=zn(e);return!isNaN(Number(t))}function Fn(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Un(e,t){return Ln(2,arguments),function(e,t){Ln(2,arguments);var n=zn(e).getTime(),r=Fn(t);return new Date(n+r)}(e,-Fn(t))}function An(e){Ln(1,arguments);var t=zn(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function In(e){Ln(1,arguments);var t=zn(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=An(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=An(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Wn(e){Ln(1,arguments);var t=zn(e),n=An(t).getTime()-function(e){Ln(1,arguments);var t=In(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),An(n)}(t).getTime();return Math.round(n/6048e5)+1}var Bn={};function qn(){return Bn}function Hn(e,t){var n,r,a,i,o,l,s,u;Ln(1,arguments);var c=qn(),d=Fn(null!==(n=null!==(r=null!==(a=null!==(i=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==i?i:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:c.weekStartsOn)&&void 0!==r?r:null===(s=c.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=zn(e),m=f.getUTCDay(),p=(m<d?7:0)+m-d;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function $n(e,t){var n,r,a,i,o,l,s,u;Ln(1,arguments);var c=zn(e),d=c.getUTCFullYear(),f=qn(),m=Fn(null!==(n=null!==(r=null!==(a=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:f.firstWeekContainsDate)&&void 0!==r?r:null===(s=f.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==n?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,m),p.setUTCHours(0,0,0,0);var h=Hn(p,t),g=new Date(0);g.setUTCFullYear(d,0,m),g.setUTCHours(0,0,0,0);var v=Hn(g,t);return c.getTime()>=h.getTime()?d+1:c.getTime()>=v.getTime()?d:d-1}function Vn(e,t){Ln(1,arguments);var n=zn(e),r=Hn(n,t).getTime()-function(e,t){var n,r,a,i,o,l,s,u;Ln(1,arguments);var c=qn(),d=Fn(null!==(n=null!==(r=null!==(a=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(l=o.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:c.firstWeekContainsDate)&&void 0!==r?r:null===(s=c.locale)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==n?n:1),f=$n(e,t),m=new Date(0);return m.setUTCFullYear(f,0,d),m.setUTCHours(0,0,0,0),Hn(m,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function Qn(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const Yn={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return Qn("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Qn(n+1,2)},d:function(e,t){return Qn(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return Qn(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Qn(e.getUTCHours(),t.length)},m:function(e,t){return Qn(e.getUTCMinutes(),t.length)},s:function(e,t){return Qn(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return Qn(Math.floor(r*Math.pow(10,n-3)),t.length)}};var Jn="midnight",Xn="noon",Kn="morning",Gn="afternoon",Zn="evening",er="night",tr={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Yn.y(e,t)},Y:function(e,t,n,r){var a=$n(e,r),i=a>0?a:1-a;return"YY"===t?Qn(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):Qn(i,t.length)},R:function(e,t){return Qn(In(e),t.length)},u:function(e,t){return Qn(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Qn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Qn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Yn.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Qn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=Vn(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):Qn(a,t.length)},I:function(e,t,n){var r=Wn(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Qn(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Yn.d(e,t)},D:function(e,t,n){var r=function(e){Ln(1,arguments);var t=zn(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Qn(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Qn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Qn(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return Qn(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?Xn:0===a?Jn:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?Zn:a>=12?Gn:a>=4?Kn:er,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Yn.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Yn.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Qn(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Qn(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Yn.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Yn.s(e,t)},S:function(e,t){return Yn.S(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return rr(a);case"XXXX":case"XX":return ar(a);default:return ar(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return rr(a);case"xxxx":case"xx":return ar(a);default:return ar(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+nr(a,":");default:return"GMT"+ar(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+nr(a,":");default:return"GMT"+ar(a,":")}},t:function(e,t,n,r){var a=r._originalDate||e;return Qn(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,n,r){return Qn((r._originalDate||e).getTime(),t.length)}};function nr(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(0===i)return n+String(a);var o=t||"";return n+String(a)+o+Qn(i,2)}function rr(e,t){return e%60===0?(e>0?"-":"+")+Qn(Math.abs(e)/60,2):ar(e,t)}function ar(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e);return r+Qn(Math.floor(a/60),2)+n+Qn(a%60,2)}const ir=tr;var or=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},lr=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},sr={p:lr,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return or(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",or(a,t)).replace("{{time}}",lr(i,t))}};const ur=sr;var cr=["D","DD"],dr=["YY","YYYY"];function fr(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var mr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const pr=function(e,t,n){var r,a=mr[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hr(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var gr={date:hr({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:hr({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:hr({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var vr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function yr(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=null!==n&&void 0!==n&&n.width?String(n.width):a;r=e.formattingValues[i]||e.formattingValues[a]}else{var o=e.defaultWidth,l=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[l]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function br(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o,l=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,function(e){return e.test(l)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(s,function(e){return e.test(l)});return o=e.valueCallback?e.valueCallback(u):u,{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(l.length)}}}function xr(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var a=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];return{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(a.length)}}}const wr={code:"en-US",formatDistance:pr,formatLong:gr,formatRelative:function(e,t,n,r){return vr[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:yr({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:yr({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:yr({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:yr({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:yr({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:xr({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:br({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:br({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:br({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:br({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:br({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var kr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Sr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jr=/^'([^]*?)'?$/,Nr=/''/g,Er=/[a-zA-Z]/;function Cr(e,t,n){var r,a,i,o,l,s,u,c,d,f,m,p,h,g,v,y,b,x;Ln(2,arguments);var w=String(t),k=qn(),S=null!==(r=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:k.locale)&&void 0!==r?r:wr,j=Fn(null!==(i=null!==(o=null!==(l=null!==(s=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==s?s:null===n||void 0===n||null===(u=n.locale)||void 0===u||null===(c=u.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==l?l:k.firstWeekContainsDate)&&void 0!==o?o:null===(d=k.locale)||void 0===d||null===(f=d.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==i?i:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=Fn(null!==(m=null!==(p=null!==(h=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(v=n.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==h?h:k.weekStartsOn)&&void 0!==p?p:null===(b=k.locale)||void 0===b||null===(x=b.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==m?m:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var E=zn(e);if(!Dn(E))throw new RangeError("Invalid time value");var C=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(E),_=Un(E,C),T={firstWeekContainsDate:j,weekStartsOn:N,locale:S,_originalDate:E};return w.match(Sr).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,ur[t])(e,S.formatLong):e}).join("").match(kr).map(function(r){if("''"===r)return"'";var a=r[0];if("'"===a)return function(e){var t=e.match(jr);if(!t)return e;return t[1].replace(Nr,"'")}(r);var i,o=ir[a];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||(i=r,-1===dr.indexOf(i))||fr(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return-1!==cr.indexOf(e)}(r)||fr(r,t,String(e)),o(_,r,S.localize,T);if(a.match(Er))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return r}).join("")}var _r={lessThanXSeconds:{one:"moins d\u2019une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d\u2019une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d\u2019un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu\u2019un an",other:"presque {{count}} ans"}};const Tr=function(e,t,n){var r,a=_r[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",String(t)),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r};var Pr={date:hr({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:hr({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:hr({formats:{full:"{{date}} '\xe0' {{time}}",long:"{{date}} '\xe0' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var Mr={lastWeek:"eeee 'dernier \xe0' p",yesterday:"'hier \xe0' p",today:"'aujourd\u2019hui \xe0' p",tomorrow:"'demain \xe0' p'",nextWeek:"eeee 'prochain \xe0' p",other:"P"};const Or={code:"fr",formatDistance:Tr,formatLong:Pr,formatRelative:function(e,t,n,r){return Mr[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=null===t||void 0===t?void 0:t.unit;if(0===n)return"0";return n+(1===n?r&&["year","week","hour","minute","second"].includes(r)?"\xe8re":"er":"\xe8me")},era:yr({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]},defaultWidth:"wide"}),quarter:yr({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2\xe8me trim.","3\xe8me trim.","4\xe8me trim."],wide:["1er trimestre","2\xe8me trimestre","3\xe8me trimestre","4\xe8me trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:yr({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],wide:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]},defaultWidth:"wide"}),day:yr({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:yr({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr\xe8s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l\u2019apr\xe8s-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},match:{ordinalNumber:xr({matchPattern:/^(\d+)(i\xe8me|\xe8re|\xe8me|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:br({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant J\xe9sus-Christ|apr\xe8s J\xe9sus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:br({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|\xe8me|e)? trim\.?/i,wide:/^[1234](er|\xe8me|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:br({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|f\xe9vr|mars|avr|mai|juin|juill|juil|ao\xfbt|sept|oct|nov|d\xe9c)\.?/i,wide:/^(janvier|f\xe9vrier|mars|avril|mai|juin|juillet|ao\xfbt|septembre|octobre|novembre|d\xe9cembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:br({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:br({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'apr\xe8s[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}},Rr=()=>{const{isAgent:e,api:t,user:n}=Gt(),[r,a]=(0,i.useState)([]),[o,l]=(0,i.useState)([]),[s,u]=(0,i.useState)([]),[c,d]=(0,i.useState)(!0),[f,m]=(0,i.useState)(""),[p,h]=(0,i.useState)(!1),[g,v]=(0,i.useState)(!1),[y,b]=(0,i.useState)(null),[x,w]=(0,i.useState)(null),[k,S]=(0,i.useState)([]),[j,N]=(0,i.useState)(""),[E,C]=(0,i.useState)(!1),[_,T]=(0,i.useState)(!1),[P,M]=(0,i.useState)([]),[O,R]=(0,i.useState)(!1),[L,z]=(0,i.useState)(!1),[D,F]=(0,i.useState)("active"),[U,A]=(0,i.useState)(""),[I,W]=(0,i.useState)({titre:"",client_id:"",demandeur_id:"",status:"nouveau",date_fin_prevue:"",requete_initiale:""});(0,i.useEffect)(()=>{B(),q(),e&&H()},[e,D,U]);const B=async()=>{try{let e={};"active"===D&&(e.status_filter="nouveau,en_cours,en_attente,repondu"),U&&(e.client_id=U);const n=Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():"",r=await t.get(`/api/tickets${n}`);a(r.data)}catch(f){m("Erreur lors du chargement des tickets")}finally{d(!1)}},q=async()=>{try{const e=await t.get("/api/clients");l(e.data)}catch(f){console.error("Erreur lors du chargement des clients:",f)}},H=async()=>{try{const e=await t.get("/api/demandeurs");u(e.data)}catch(f){console.error("Erreur lors du chargement des demandeurs:",f)}},$=async e=>{R(!0);try{const n=await t.get(`/api/ticket-fichiers?ticketId=${e}`);M(n.data)}catch(f){console.error("Erreur lors du chargement des fichiers:",f)}finally{R(!1)}},V=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},Q=async e=>{C(!0);try{const n=await t.get(`/api/ticket-echanges?ticketId=${e}`);S(n.data),setTimeout(()=>{const e=document.querySelector(".comments-scroll-container");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},100)}catch(f){console.error("Erreur lors du chargement des \xe9changes:",f)}finally{C(!1)}},Y=async n=>{if(n.preventDefault(),j.trim())try{const n=await t.post(`/api/ticket-echanges?ticketId=${x.id}`,{message:j}),r=[...k,n.data];S(r),N(""),e&&"repondu"!==x.status&&await J(x.id,"repondu"),setTimeout(()=>{const e=document.querySelector(".comments-scroll-container");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},100)}catch(f){var r,a;m((null===(r=f.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail)||"Erreur lors de l'ajout du commentaire")}},J=async(e,n)=>{try{await t.put(`/api/tickets/${e}`,{...x,status:n}),w({...x,status:n}),B()}catch(f){var r,a;m((null===(r=f.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail)||"Erreur lors de la mise \xe0 jour du statut")}},X=()=>{h(!1),b(null),W({titre:"",client_id:"",demandeur_id:"",status:"nouveau",date_fin_prevue:"",requete_initiale:""}),m("")},K=e=>(0,Xt.jsx)("span",{className:`status-badge ${{nouveau:"status-nouveau",en_cours:"status-en-cours",en_attente:"status-en-attente",repondu:"status-repondu",resolu:"status-resolu",ferme:"status-ferme"}[e]}`,children:{nouveau:"Nouveau",en_cours:"En cours",en_attente:"En attente",repondu:"R\xe9pondu",resolu:"R\xe9solu",ferme:"Ferm\xe9"}[e]||e});return c?(0,Xt.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Xt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,Xt.jsxs)("div",{className:"fade-in",children:[(0,Xt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Xt.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-dark-text",children:e?"Supervision des Tickets":"Mes Tickets"}),(0,Xt.jsxs)("div",{className:"flex space-x-3",children:[(0,Xt.jsxs)("button",{onClick:B,className:"btn-secondary flex items-center",title:"Actualiser la liste",children:[(0,Xt.jsx)(_n,{className:"h-5 w-5 mr-2"}),"Actualiser"]}),(0,Xt.jsxs)("button",{onClick:()=>h(!0),className:"btn-primary flex items-center",children:[(0,Xt.jsx)(bn,{className:"h-5 w-5 mr-2"}),"Nouveau Ticket"]})]})]}),e&&(0,Xt.jsxs)("div",{className:"mb-6 flex space-x-4 items-center",children:[(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Statut des tickets"}),(0,Xt.jsxs)("select",{value:D,onChange:e=>F(e.target.value),className:"input w-48",children:[(0,Xt.jsx)("option",{value:"active",children:"Actifs (Nouveau, En cours, En attente)"}),(0,Xt.jsx)("option",{value:"all",children:"Tous les tickets"})]})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Filtrer par client"}),(0,Xt.jsxs)("select",{value:U,onChange:e=>A(e.target.value),className:"input w-64",children:[(0,Xt.jsx)("option",{value:"",children:"Tous les clients"}),o.map(e=>(0,Xt.jsxs)("option",{value:e.id,children:[e.nom_societe," - ",e.prenom," ",e.nom]},e.id))]})]})]}),f&&(0,Xt.jsxs)("div",{className:"mb-4 flex items-center p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,Xt.jsx)(hn,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-3"}),(0,Xt.jsx)("span",{className:"text-red-700 dark:text-red-300",children:f})]}),(0,Xt.jsxs)("div",{className:"grid gap-4",children:[r.map(n=>(0,Xt.jsx)("div",{className:"card p-6",children:(0,Xt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Xt.jsxs)("div",{className:"flex-1",children:[(0,Xt.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,Xt.jsx)(nn,{className:"h-5 w-5 text-primary-600"}),(0,Xt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-dark-text",children:n.titre}),K(n.status)]}),(0,Xt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,Xt.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-dark-muted",children:[(0,Xt.jsx)(xn,{className:"h-4 w-4 mr-2"}),(0,Xt.jsxs)("span",{children:["Client: ",n.client_nom]})]}),(0,Xt.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-dark-muted",children:[(0,Xt.jsx)(Tn,{className:"h-4 w-4 mr-2"}),(0,Xt.jsxs)("span",{children:["Demandeur: ",n.demandeur_prenom," ",n.demandeur_nom]})]}),(0,Xt.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-dark-muted",children:[(0,Xt.jsx)(Pn,{className:"h-4 w-4 mr-2"}),(0,Xt.jsxs)("span",{children:["Cr\xe9\xe9 le: ",Cr(new Date(n.date_creation),"dd MMM yyyy",{locale:Or})]})]})]}),n.date_fin_prevue&&(0,Xt.jsxs)("div",{className:"flex items-center text-sm text-orange-600 dark:text-orange-400 mt-2",children:[(0,Xt.jsx)(Mn,{className:"h-4 w-4 mr-2"}),(0,Xt.jsxs)("span",{children:["\xc9ch\xe9ance: ",Cr(new Date(n.date_fin_prevue),"dd MMM yyyy",{locale:Or})]})]}),(0,Xt.jsx)("p",{className:"text-gray-700 dark:text-dark-text mt-3 line-clamp-2",children:n.requete_initiale})]}),(0,Xt.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,Xt.jsx)("button",{onClick:()=>(e=>{w(e),v(!0),Q(e.id),$(e.id)})(n),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Voir le d\xe9tail",children:(0,Xt.jsx)(On,{className:"h-4 w-4"})}),e&&(0,Xt.jsx)("button",{onClick:()=>(e=>{b(e),W({titre:e.titre,client_id:e.client_id,demandeur_id:e.demandeur_id||"",status:e.status,date_fin_prevue:e.date_fin_prevue?e.date_fin_prevue.split("T")[0]:"",requete_initiale:e.requete_initiale}),h(!0)})(n),className:"p-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300",title:"Modifier",children:(0,Xt.jsx)(wn,{className:"h-4 w-4"})}),e&&(0,Xt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce ticket ?"))try{await t.delete(`/api/tickets/${e}`),B()}catch(f){var n,r;m((null===(n=f.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erreur lors de la suppression")}})(n.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Supprimer",children:(0,Xt.jsx)(kn,{className:"h-4 w-4"})})]})]})},n.id)),0===r.length&&(0,Xt.jsxs)("div",{className:"card p-12 text-center",children:[(0,Xt.jsx)(nn,{className:"h-16 w-16 text-gray-300 dark:text-dark-muted mx-auto mb-4"}),(0,Xt.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-dark-text mb-2",children:"Aucun ticket"}),(0,Xt.jsx)("p",{className:"text-gray-500 dark:text-dark-muted",children:e?"Aucun ticket n'a \xe9t\xe9 cr\xe9\xe9 pour le moment.":"Vous n'avez aucun ticket. Cr\xe9ez-en un nouveau !"})]})]}),p&&(0,Xt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-overlay",children:(0,Xt.jsxs)("div",{className:"bg-white dark:bg-dark-surface rounded-lg p-6 w-full max-w-2xl modal-content max-h-90vh overflow-y-auto",children:[(0,Xt.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-dark-text",children:y?"Modifier le Ticket":"Nouveau Ticket"}),(0,Xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{y?await t.put(`/api/tickets/${y.id}`,I):await t.post("/api/tickets",I),B(),X()}catch(f){var n,r;m((null===(n=f.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erreur lors de la sauvegarde")}},className:"space-y-4",children:[(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Titre *"}),(0,Xt.jsx)("input",{type:"text",required:!0,value:I.titre,onChange:e=>W({...I,titre:e.target.value}),className:"input"})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Client *"}),(0,Xt.jsxs)("select",{required:!0,value:I.client_id,onChange:e=>W({...I,client_id:e.target.value}),className:"input",children:[(0,Xt.jsx)("option",{value:"",children:"S\xe9lectionner un client"}),o.map(e=>(0,Xt.jsxs)("option",{value:e.id,children:[e.nom_societe," - ",e.prenom," ",e.nom]},e.id))]})]}),e&&(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Demandeur *"}),(0,Xt.jsxs)("select",{required:!0,value:I.demandeur_id,onChange:e=>W({...I,demandeur_id:e.target.value}),className:"input",children:[(0,Xt.jsx)("option",{value:"",children:"S\xe9lectionner un demandeur"}),s.map(e=>(0,Xt.jsxs)("option",{value:e.id,children:[e.prenom," ",e.nom," - ",e.societe]},e.id))]})]}),(0,Xt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Statut"}),(0,Xt.jsxs)("select",{value:I.status,onChange:e=>W({...I,status:e.target.value}),className:"input",children:[(0,Xt.jsx)("option",{value:"nouveau",children:"Nouveau"}),(0,Xt.jsx)("option",{value:"en_cours",children:"En cours"}),(0,Xt.jsx)("option",{value:"en_attente",children:"En attente"}),(0,Xt.jsx)("option",{value:"repondu",children:"R\xe9pondu"}),(0,Xt.jsx)("option",{value:"resolu",children:"R\xe9solu"}),(0,Xt.jsx)("option",{value:"ferme",children:"Ferm\xe9"})]})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Date de fin pr\xe9vue"}),(0,Xt.jsx)("input",{type:"date",value:I.date_fin_prevue,onChange:e=>W({...I,date_fin_prevue:e.target.value}),className:"input"})]})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Requ\xeate initiale *"}),(0,Xt.jsx)("textarea",{required:!0,value:I.requete_initiale,onChange:e=>W({...I,requete_initiale:e.target.value}),className:"input h-32 resize-none",placeholder:"D\xe9crivez la demande ou le probl\xe8me..."})]}),(0,Xt.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Xt.jsx)("button",{type:"button",onClick:X,className:"btn-secondary",children:"Annuler"}),(0,Xt.jsx)("button",{type:"submit",className:"btn-primary",children:y?"Modifier":"Cr\xe9er"})]})]})]})}),g&&x&&(0,Xt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-overlay",children:(0,Xt.jsxs)("div",{className:"bg-white dark:bg-dark-surface rounded-lg p-6 w-full max-w-4xl modal-content max-h-90vh overflow-y-auto",children:[(0,Xt.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Xt.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-dark-text",children:"D\xe9tail du Ticket"}),(0,Xt.jsx)("button",{onClick:()=>{v(!1),w(null),S([]),N(""),T(!1)},className:"text-gray-500 hover:text-gray-700 dark:text-dark-muted dark:hover:text-dark-text",children:"\u2715"})]}),(0,Xt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Xt.jsxs)("div",{className:"space-y-6",children:[(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-dark-text mb-2",children:x.titre}),(0,Xt.jsxs)("div",{className:"flex items-center space-x-3",children:[K(x.status),e&&(0,Xt.jsxs)("select",{value:x.status,onChange:e=>J(x.id,e.target.value),className:"text-xs px-2 py-1 rounded border border-gray-300 dark:border-dark-border bg-white dark:bg-dark-surface text-gray-700 dark:text-dark-text focus:ring-2 focus:ring-primary-500",children:[(0,Xt.jsx)("option",{value:"nouveau",children:"Nouveau"}),(0,Xt.jsx)("option",{value:"en_cours",children:"En cours"}),(0,Xt.jsx)("option",{value:"en_attente",children:"En attente"}),(0,Xt.jsx)("option",{value:"repondu",children:"R\xe9pondu"}),(0,Xt.jsx)("option",{value:"resolu",children:"R\xe9solu"}),(0,Xt.jsx)("option",{value:"ferme",children:"Ferm\xe9"})]})]})]}),(0,Xt.jsxs)("div",{className:"space-y-4",children:[(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Client"}),(0,Xt.jsx)("p",{className:"text-gray-900 dark:text-dark-text",children:x.client_nom})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Demandeur"}),(0,Xt.jsxs)("p",{className:"text-gray-900 dark:text-dark-text",children:[x.demandeur_prenom," ",x.demandeur_nom]})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Date de cr\xe9ation"}),(0,Xt.jsx)("p",{className:"text-gray-900 dark:text-dark-text",children:Cr(new Date(x.date_creation),"dd MMMM yyyy \xe0 HH:mm",{locale:Or})})]}),x.date_fin_prevue&&(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-1",children:"Date de fin pr\xe9vue"}),(0,Xt.jsx)("p",{className:"text-gray-900 dark:text-dark-text",children:Cr(new Date(x.date_fin_prevue),"dd MMMM yyyy",{locale:Or})})]})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text mb-2",children:"Requ\xeate initiale"}),(0,Xt.jsx)("div",{className:"bg-gray-50 dark:bg-dark-card p-4 rounded-lg",children:(0,Xt.jsx)("p",{className:"text-gray-900 dark:text-dark-text whitespace-pre-wrap",children:x.requete_initiale})})]}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-dark-text",children:"Fichiers joints"}),(0,Xt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xt.jsx)("input",{type:"file",id:"fileUpload",className:"hidden",accept:".jpg,.jpeg,.png,.gif,.pdf,.wav,.txt,.doc,.docx",onChange:async n=>{const r=n.target.files[0];if(!r)return;if(r.size>10485760)return void m("Fichier trop volumineux (limite: 10MB)");if(["image/jpeg","image/png","image/gif","image/webp","application/pdf","audio/wav","audio/wave","audio/x-wav","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(r.type)){z(!0);try{const a=await new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result.split(",")[1]),n.onerror=t,n.readAsDataURL(r)}),i={nom_fichier:r.name,type_fichier:r.type,taille_fichier:r.size,contenu_base64:a};await t.post(`/api/ticket-fichiers?ticketId=${x.id}`,i);try{const n=await t.post(`/api/ticket-echanges?ticketId=${x.id}`,{message:`A ajout\xe9 une pi\xe8ce jointe ${r.name}`});S([...k,n.data]),e&&"repondu"!==x.status&&await J(x.id,"repondu")}catch(o){console.error("Erreur lors de l'ajout du commentaire automatique:",o)}$(x.id),n.target.value=""}catch(f){var a,i;m((null===(a=f.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.detail)||"Erreur lors de l'upload du fichier")}finally{z(!1)}}else m("Type de fichier non autoris\xe9. Formats accept\xe9s: Images, PDF, WAV, TXT, DOC")},disabled:L}),(0,Xt.jsx)("label",{htmlFor:"fileUpload",className:"text-sm px-3 py-1 rounded border transition-colors cursor-pointer "+(L?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-primary-500 text-white hover:bg-primary-600 border-primary-500"),children:L?"Upload...":"+ Ajouter un fichier"})]})]}),O?(0,Xt.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,Xt.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"})}):P.length>0?(0,Xt.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:P.map(n=>{return(0,Xt.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-dark-card rounded border",children:[(0,Xt.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,Xt.jsx)("span",{className:"text-lg",children:(r=n.type_fichier,null!==r&&void 0!==r&&r.startsWith("image/")?"\ud83d\uddbc\ufe0f":"application/pdf"===r?"\ud83d\udcc4":null!==r&&void 0!==r&&r.startsWith("audio/")?"\ud83c\udfb5":null!==r&&void 0!==r&&r.includes("word")?"\ud83d\udcdd":"\ud83d\udcce")}),(0,Xt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xt.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-dark-text truncate",children:n.nom_fichier}),(0,Xt.jsxs)("p",{className:"text-xs text-gray-500 dark:text-dark-muted",children:[V(n.taille_fichier)," \u2022 ",n.uploaded_by_name," \u2022 ",Cr(new Date(n.uploaded_at),"dd/MM/yyyy HH:mm",{locale:Or})]})]})]}),(0,Xt.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Xt.jsx)("button",{onClick:()=>(e=>{try{const t=atob(e.contenu_base64),n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);const r=new Uint8Array(n),a=new Blob([r],{type:e.type_fichier}),i=window.URL.createObjectURL(a),o=document.createElement("a");o.href=i,o.download=e.nom_fichier,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i)}catch(f){m("Erreur lors du t\xe9l\xe9chargement du fichier")}})(n),className:"p-1 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300",title:"T\xe9l\xe9charger",children:(0,Xt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Xt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(e||"demandeur"===n.uploaded_by_type)&&(0,Xt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce fichier ?"))try{await t.delete(`/api/ticket-fichiers?ticketId=${x.id}&fileId=${e}`),$(x.id)}catch(f){var n,r;m((null===(n=f.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erreur lors de la suppression du fichier")}})(n.id),className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Supprimer",children:(0,Xt.jsx)(kn,{className:"w-4 h-4"})})]})]},n.id);var r})}):(0,Xt.jsx)("p",{className:"text-sm text-gray-500 dark:text-dark-muted italic py-2",children:"Aucun fichier joint pour le moment"}),(0,Xt.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Formats accept\xe9s: Images (JPG, PNG, GIF), PDF, Audio (WAV), Documents (TXT, DOC) \u2022 Taille max: 10MB"})]})]}),(0,Xt.jsxs)("div",{className:"flex flex-col h-full min-h-[500px]",children:[(0,Xt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xt.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-dark-text",children:"\xc9changes et commentaires"}),(0,Xt.jsxs)("div",{className:"flex items-center space-x-3",children:[k.length>0&&(0,Xt.jsxs)("span",{className:"text-sm text-gray-500 dark:text-dark-muted",children:[k.length," commentaire",k.length>1?"s":""]}),(0,Xt.jsxs)("button",{onClick:()=>Q(x.id),className:"flex items-center space-x-1 text-sm text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300 transition-colors",title:"Actualiser les commentaires",disabled:E,children:[(0,Xt.jsx)(_n,{className:"h-4 w-4 "+(E?"animate-spin":"")}),(0,Xt.jsx)("span",{children:"Actualiser"})]})]})]}),(0,Xt.jsxs)("div",{className:"flex-1 border border-gray-200 dark:border-dark-border rounded-lg mb-4 bg-gray-50 dark:bg-dark-card relative",children:[(0,Xt.jsx)("div",{className:"h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent p-4 pb-8 comments-scroll-container bg-gradient-to-b from-gray-50 to-gray-100 dark:from-dark-card dark:to-dark-surface",children:E?(0,Xt.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,Xt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):k.length>0?(0,Xt.jsx)("div",{className:"space-y-3",children:k.map((t,r)=>{const a=n&&(e&&"agent"===t.auteur_type||!e&&"demandeur"===t.auteur_type),i="agent"===t.auteur_type;return(0,Xt.jsx)("div",{className:`flex ${a?"justify-end":"justify-start"} ${r===k.length-1?"animate-fade-in":""}`,children:(0,Xt.jsxs)("div",{className:"max-w-xs lg:max-w-md "+(a?"order-2":"order-1"),children:[(0,Xt.jsx)("div",{className:"rounded-2xl px-4 py-3 shadow-sm "+(a?"bg-primary-500 text-white rounded-br-md":"bg-white dark:bg-dark-surface text-gray-900 dark:text-dark-text rounded-bl-md border border-gray-200 dark:border-dark-border"),children:(0,Xt.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap break-words",children:t.message})}),(0,Xt.jsx)("div",{className:"flex items-center mt-1 text-xs text-gray-500 dark:text-dark-muted "+(a?"justify-end":"justify-start"),children:(0,Xt.jsxs)("div",{className:"flex items-center space-x-2 "+(a?"flex-row-reverse space-x-reverse":""),children:[(0,Xt.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium text-white comment-avatar "+(i?"bg-primary-600":"bg-green-500"),children:t.auteur_nom.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase()}),(0,Xt.jsx)("span",{className:"font-medium",children:a?"Moi":t.auteur_nom}),(0,Xt.jsx)("span",{children:"\u2022"}),(0,Xt.jsx)("span",{children:Cr(new Date(t.created_at),"HH:mm",{locale:Or})})]})})]})},t.id)})}):(0,Xt.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Xt.jsx)("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:(0,Xt.jsx)("svg",{className:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Xt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,Xt.jsx)("p",{className:"text-gray-500 dark:text-dark-muted",children:"Aucune conversation pour ce ticket"}),(0,Xt.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-600 mt-1",children:"Commencez la discussion en envoyant le premier message"})]})}),k.length>3&&(0,Xt.jsx)("div",{className:"absolute bottom-2 right-2 text-xs text-gray-400 dark:text-gray-500 bg-white dark:bg-dark-surface px-2 py-1 rounded shadow",children:"Faire d\xe9filer pour voir plus"})]}),(0,Xt.jsx)("div",{className:"border-t border-gray-200 dark:border-dark-border pt-4",children:(0,Xt.jsxs)("form",{onSubmit:Y,className:"space-y-3",children:[(0,Xt.jsxs)("div",{className:"relative",children:[(0,Xt.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,Xt.jsxs)("button",{type:"button",onClick:()=>T(!_),className:"text-sm text-gray-500 hover:text-gray-700 dark:text-dark-muted dark:hover:text-dark-text flex items-center space-x-1",children:[(0,Xt.jsx)("span",{className:"text-lg",children:"\ud83d\ude0a"}),(0,Xt.jsx)("span",{children:"\xc9mojis"})]})}),_&&(0,Xt.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 emoji-picker border border-gray-200 dark:border-dark-border rounded-lg p-3 shadow-xl z-10 w-full max-w-xs",children:[(0,Xt.jsx)("div",{className:"grid grid-cols-8 gap-1",children:["\ud83d\ude0a","\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83d\ude22","\ud83d\ude02","\ud83d\udd25","\ud83d\udca1","\u2705","\u274c","\u26a0\ufe0f","\ud83e\udd14","\ud83d\udc4c","\ud83d\ude4f","\ud83d\udcaa","\ud83c\udf89"].map((e,t)=>(0,Xt.jsx)("button",{type:"button",onClick:()=>(e=>{N(j+e),T(!1)})(e),className:"w-8 h-8 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-dark-card rounded text-lg emoji-button",title:`Ajouter ${e}`,children:e},t))}),(0,Xt.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-dark-border",children:(0,Xt.jsx)("button",{type:"button",onClick:()=>T(!1),className:"text-xs text-gray-500 hover:text-gray-700 dark:text-dark-muted dark:hover:text-dark-text w-full text-center py-1",children:"Fermer"})})]})]}),(0,Xt.jsxs)("div",{className:"relative",children:[(0,Xt.jsx)("textarea",{value:j,onChange:e=>N(e.target.value),placeholder:"Tapez votre message...",className:"input h-20 resize-none pr-12 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,maxLength:1e3,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Y(e))}}),(0,Xt.jsxs)("div",{className:`absolute bottom-2 right-2 text-xs ${j.length>900?"text-red-500":j.length>800?"text-yellow-500":"text-gray-400 dark:text-gray-500"} character-counter ${j.length>900?"danger":j.length>800?"warning":""}`,children:[j.length,"/1000"]})]}),(0,Xt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xt.jsx)("span",{className:"text-xs text-gray-500 dark:text-dark-muted",children:"\ud83d\udca1 Appuyez sur Entr\xe9e pour envoyer \u2022 Shift+Entr\xe9e pour saut de ligne"}),(0,Xt.jsxs)("div",{className:"flex space-x-2",children:[_&&(0,Xt.jsx)("button",{type:"button",onClick:()=>T(!1),className:"text-xs text-gray-500 hover:text-gray-700 dark:text-dark-muted dark:hover:text-dark-text px-2 py-1",children:"Fermer"}),(0,Xt.jsxs)("button",{type:"submit",className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!j.trim(),children:[(0,Xt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Xt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),(0,Xt.jsx)("span",{children:"Envoyer"})]})]})]})]})})]})]})]})})]})},Lr=()=>{const{user:e,loading:t,isAuthenticated:n}=Gt(),[r,a]=(0,i.useState)("tickets");if(t)return(0,Xt.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-bg flex items-center justify-center",children:(0,Xt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!n)return(0,Xt.jsx)(yn,{});return(0,Xt.jsx)(mn,{currentPage:r,onNavigate:a,children:(()=>{switch(r){case"clients":return(0,Xt.jsx)(jn,{});case"demandeurs":return(0,Xt.jsx)(En,{});case"agents":return(0,Xt.jsx)(Cn,{});default:return(0,Xt.jsx)(Rr,{})}})()})};const zr=function(){return(0,Xt.jsx)(T,{children:(0,Xt.jsx)(Zt,{children:(0,Xt.jsx)(Lr,{})})})};l.createRoot(document.getElementById("root")).render((0,Xt.jsx)(i.StrictMode,{children:(0,Xt.jsx)(zr,{})}))})();
//# sourceMappingURL=main.a91d9f6b.js.map